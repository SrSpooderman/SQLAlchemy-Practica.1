<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_v4nykhqqh0ru-1>li{counter-increment:lst-ctn-kix_v4nykhqqh0ru-1}ol.lst-kix_v4nykhqqh0ru-8.start{counter-reset:lst-ctn-kix_v4nykhqqh0ru-8 0}ol.lst-kix_v4nykhqqh0ru-5.start{counter-reset:lst-ctn-kix_v4nykhqqh0ru-5 0}.lst-kix_v4nykhqqh0ru-0>li:before{content:"" counter(lst-ctn-kix_v4nykhqqh0ru-0,decimal) ". "}.lst-kix_v4nykhqqh0ru-7>li{counter-increment:lst-ctn-kix_v4nykhqqh0ru-7}.lst-kix_v4nykhqqh0ru-2>li:before{content:"" counter(lst-ctn-kix_v4nykhqqh0ru-2,lower-roman) ". "}ol.lst-kix_v4nykhqqh0ru-7.start{counter-reset:lst-ctn-kix_v4nykhqqh0ru-7 0}.lst-kix_rjtlqbwtigex-1>li:before{content:"-  "}.lst-kix_v4nykhqqh0ru-1>li:before{content:"" counter(lst-ctn-kix_v4nykhqqh0ru-1,lower-latin) ". "}.lst-kix_v4nykhqqh0ru-3>li:before{content:"" counter(lst-ctn-kix_v4nykhqqh0ru-3,decimal) ". "}.lst-kix_v4nykhqqh0ru-0>li{counter-increment:lst-ctn-kix_v4nykhqqh0ru-0}.lst-kix_rjtlqbwtigex-2>li:before{content:"-  "}.lst-kix_rjtlqbwtigex-3>li:before{content:"-  "}.lst-kix_v4nykhqqh0ru-6>li:before{content:"" counter(lst-ctn-kix_v4nykhqqh0ru-6,decimal) ". "}.lst-kix_rjtlqbwtigex-4>li:before{content:"-  "}.lst-kix_rjtlqbwtigex-5>li:before{content:"-  "}.lst-kix_v4nykhqqh0ru-5>li:before{content:"" counter(lst-ctn-kix_v4nykhqqh0ru-5,lower-roman) ". "}.lst-kix_v4nykhqqh0ru-6>li{counter-increment:lst-ctn-kix_v4nykhqqh0ru-6}.lst-kix_v4nykhqqh0ru-4>li:before{content:"" counter(lst-ctn-kix_v4nykhqqh0ru-4,lower-latin) ". "}.lst-kix_v4nykhqqh0ru-3>li{counter-increment:lst-ctn-kix_v4nykhqqh0ru-3}ol.lst-kix_v4nykhqqh0ru-4.start{counter-reset:lst-ctn-kix_v4nykhqqh0ru-4 0}.lst-kix_rjtlqbwtigex-8>li:before{content:"-  "}.lst-kix_rjtlqbwtigex-6>li:before{content:"-  "}.lst-kix_rjtlqbwtigex-7>li:before{content:"-  "}.lst-kix_v4nykhqqh0ru-7>li:before{content:"" counter(lst-ctn-kix_v4nykhqqh0ru-7,lower-latin) ". "}.lst-kix_v4nykhqqh0ru-8>li:before{content:"" counter(lst-ctn-kix_v4nykhqqh0ru-8,lower-roman) ". "}ol.lst-kix_v4nykhqqh0ru-1.start{counter-reset:lst-ctn-kix_v4nykhqqh0ru-1 0}.lst-kix_v4nykhqqh0ru-4>li{counter-increment:lst-ctn-kix_v4nykhqqh0ru-4}ol.lst-kix_v4nykhqqh0ru-8{list-style-type:none}ol.lst-kix_v4nykhqqh0ru-6{list-style-type:none}ol.lst-kix_v4nykhqqh0ru-7{list-style-type:none}ol.lst-kix_v4nykhqqh0ru-3.start{counter-reset:lst-ctn-kix_v4nykhqqh0ru-3 0}ol.lst-kix_v4nykhqqh0ru-0{list-style-type:none}ol.lst-kix_v4nykhqqh0ru-1{list-style-type:none}ol.lst-kix_v4nykhqqh0ru-4{list-style-type:none}ol.lst-kix_v4nykhqqh0ru-5{list-style-type:none}ol.lst-kix_v4nykhqqh0ru-2{list-style-type:none}ol.lst-kix_v4nykhqqh0ru-3{list-style-type:none}.lst-kix_rjtlqbwtigex-0>li:before{content:"-  "}ol.lst-kix_v4nykhqqh0ru-0.start{counter-reset:lst-ctn-kix_v4nykhqqh0ru-0 0}ol.lst-kix_v4nykhqqh0ru-2.start{counter-reset:lst-ctn-kix_v4nykhqqh0ru-2 0}ul.lst-kix_rjtlqbwtigex-1{list-style-type:none}ul.lst-kix_rjtlqbwtigex-0{list-style-type:none}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_v4nykhqqh0ru-2>li{counter-increment:lst-ctn-kix_v4nykhqqh0ru-2}ul.lst-kix_rjtlqbwtigex-5{list-style-type:none}ul.lst-kix_rjtlqbwtigex-4{list-style-type:none}ul.lst-kix_rjtlqbwtigex-3{list-style-type:none}.lst-kix_v4nykhqqh0ru-8>li{counter-increment:lst-ctn-kix_v4nykhqqh0ru-8}ul.lst-kix_rjtlqbwtigex-2{list-style-type:none}ul.lst-kix_rjtlqbwtigex-8{list-style-type:none}.lst-kix_v4nykhqqh0ru-5>li{counter-increment:lst-ctn-kix_v4nykhqqh0ru-5}ul.lst-kix_rjtlqbwtigex-7{list-style-type:none}ul.lst-kix_rjtlqbwtigex-6{list-style-type:none}ol.lst-kix_v4nykhqqh0ru-6.start{counter-reset:lst-ctn-kix_v4nykhqqh0ru-6 0}ol{margin:0;padding:0}table td,table th{padding:0}.c3{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c18{padding-top:14pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c40{padding-top:12pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c41{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c7{background-color:#212121;padding-top:0pt;padding-bottom:0pt;line-height:1.375;orphans:2;widows:2;text-align:left}.c26{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c23{color:#4a4a4a;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Courier New"}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c24{padding-top:0pt;padding-bottom:0pt;line-height:1.3;orphans:2;widows:2;text-align:left}.c5{font-size:12pt;font-family:"Courier New";color:#89ddff;font-weight:400}.c11{color:#666666;font-weight:400;font-size:12pt;font-family:"Arial"}.c4{font-size:12pt;font-family:"Courier New";color:#c792ea;font-weight:400}.c22{font-size:12pt;font-family:"Courier New";color:#ff5370;font-weight:400}.c6{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c1{background-color:#cccccc;font-size:10.5pt;font-family:"Courier New";font-weight:400}.c14{font-size:12pt;font-family:"Courier New";color:#f78c6c;font-weight:400}.c28{background-color:#cccccc;font-size:10.5pt;font-family:"Courier New";color:#008000}.c27{font-size:12pt;font-family:"Courier New";color:#c3e88d;font-weight:400}.c2{font-size:12pt;font-family:"Courier New";color:#eeffff;font-weight:400}.c21{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c15{font-size:12pt;font-family:"Courier New";color:#82aaff;font-weight:400}.c10{text-decoration:none;vertical-align:baseline;font-style:normal}.c20{font-weight:400;font-size:20pt;font-family:"Arial"}.c37{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c38{font-weight:400;font-size:26pt;font-family:"Arial"}.c35{background-color:#cccccc;font-size:10.5pt;font-family:"Courier New"}.c30{margin-left:72pt;padding-left:0pt}.c12{padding:0;margin:0}.c32{margin-left:36pt;text-indent:36pt}.c25{color:inherit;text-decoration:inherit}.c16{margin-left:36pt;padding-left:0pt}.c31{color:#666666;font-weight:400}.c17{font-size:11pt;font-family:"Arial"}.c33{color:#0000ff}.c13{margin-left:144pt}.c8{font-style:italic}.c36{color:#ba2121}.c39{color:#666666}.c34{color:#aa22ff}.c19{height:11pt}.c9{font-weight:700}.c29{color:#19177c}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c37 doc-content"><p class="c41 title" id="h.lnoswikd3x46"><span class="c6 c38">SQLAlchemy con Flask</span></p><p class="c0"><span class="c3">Este documento explica como hacer peticiones SQLAlchemy con Python usando el Framework Flask.</span></p><p class="c0"><span class="c3">Yo utilizar&eacute; el IDE de Visual Studio Code (VSC) para realizar esta pr&aacute;ctica.</span></p><p class="c0"><span class="c3">Como dice nuestra se&ntilde;ora wikipedia Flask es una Framework minimalista basado en python que nos permite a los programadores crear aplicaciones web f&aacute;cil y r&aacute;pidamente.</span></p><p class="c0 c13"><span class="c28 c9">from</span><span class="c1">&nbsp;</span><span class="c33 c9 c35">flask</span><span class="c1">&nbsp;</span><span class="c28 c9">import</span><span class="c6 c1">&nbsp;Flask</span></p><p class="c0 c13"><span class="c1">app </span><span class="c1 c39">=</span><span class="c1">&nbsp;Flask(</span><span class="c1 c29">__name__</span><span class="c6 c1">)</span></p><p class="c0 c13"><span class="c1 c34">@app</span><span class="c1 c39">.</span><span class="c1">route(</span><span class="c1 c36">&quot;/&quot;</span><span class="c6 c1">)</span></p><p class="c0 c13"><span class="c9 c28">def</span><span class="c1">&nbsp;</span><span class="c1 c33">holamundo</span><span class="c6 c1">():</span></p><p class="c0 c13"><span class="c1">&nbsp; &nbsp; </span><span class="c28 c9">return</span><span class="c1">&nbsp;</span><span class="c1 c36">&quot;&iexcl;Hola Mundo!&quot;</span></p><p class="c24 c13"><span class="c6 c1">if __name__==&#39;__main__&#39;:</span></p><p class="c13 c24"><span class="c1 c6">&nbsp; &nbsp; app.run()</span></p><p class="c0"><span class="c3">Este peque&ntilde;o fragmento de c&oacute;digo es la iniciaci&oacute;n del mismo haciendo un mini servidor en el puerto 5000.</span></p><p class="c0"><span class="c3">SQLAlchemy es una herramienta de mapeado, cosa que nos permite crear bases de datos y manipular las mismas sin usar SQL.</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3">Vamos al proceso de aprender a usar Flask, luego aprender a usar SQLite, despu&eacute;s aprender a usar SQLAlchemy y finalmente hacer peticiones a una base de datos de SQLAlchemy.</span></p><h1 class="c26" id="h.g9zd46xg69z3"><span class="c6 c20">FLASK</span></h1><h4 class="c18" id="h.6eameq7g1aks"><span class="c11 c10">1- Como instalar Flask</span></h4><p class="c0"><span class="c3">Para usar flask de la mejor forma posible necesitamos un entorno de desarrollo virtual dentro de una carpeta de nuestro ordenador.</span></p><p class="c0"><span class="c3">Para ello accedemos desde visual studio a la carpeta donde trabajaremos y pondremos:</span></p><p class="c0"><span class="c6 c17 c9">python -m venv ./env</span></p><p class="c0"><span class="c3">Donde ponemos python para que identifique que es un comando de python ya que venv no existe dentro de la terminal.</span></p><p class="c0"><span>venv es el comando para crear </span><span class="c6 c17 c9">environment virtual</span></p><p class="c0"><span class="c3">Al final elegimos la carpeta donde se va a crear yo pongo ./env porque quiero que me cree una carpeta con env.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 201.33px;"><img alt="" src="images/image14.png" style="width: 601.70px; height: 201.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>Y pues nos crea una carpeta con el </span><span class="c9">environment virtual </span><span class="c3">donde trabajaremos con Flask.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 172.80px; height: 371.50px;"><img alt="" src="images/image34.png" style="width: 172.80px; height: 371.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3">Dentro de ./env se crean varias carpetas.</span></p><p class="c0"><span class="c3">./env/Include</span></p><p class="c0"><span class="c3">./env/Lib</span></p><p class="c0"><span class="c3">./env/Scripts</span></p><p class="c0"><span class="c3">./env/pyvenv.cfg</span></p><p class="c0"><span>Para iniciar este </span><span class="c9">entorno virtual </span><span class="c3">tenemos que activar los permisos de ejecuci&oacute;n de powershell.</span></p><p class="c0"><span class="c3">Para ello abrimos un powershell en modo administrador y ponemos estos comandos.</span></p><p class="c0"><span class="c9">Get-ExecutionPolicy -List </span><span class="c3">para ver los permisos que hay.</span></p><p class="c0"><span class="c9">Set-ExecutionPolicy RemoteSigned -Scope CurrentUser </span><span class="c3">para poner al usuario actual permiso de ejecutar scripts.</span></p><p class="c0 c32"><span class="c3">Luego volvemos a usar el primer comando para comprobar que el permiso ha sido dado correctamente.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 174.50px; height: 101.54px;"><img alt="" src="images/image54.png" style="width: 174.50px; height: 101.54px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">As&iacute; deber&iacute;a ser el resultado final de los comandos.</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span>Para activar el </span><span class="c9">entorno virtual </span><span>entramos dentro del archivo </span><span class="c6 c17 c9">./env/Scripts/activate</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 88.00px;"><img alt="" src="images/image4.png" style="width: 601.70px; height: 88.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 575.00px; height: 28.00px;"><img alt="" src="images/image38.png" style="width: 575.00px; height: 28.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Dentro del entorno podemos trabajar con los archivos dentro del mismo.</span></p><p class="c0"><span>Para ver las librer&iacute;as instaladas dentro de nuestro </span><span class="c9">entorno virtual </span><span>usamos el comando </span><span class="c9">pip list</span><span class="c3">.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 164.00px;"><img alt="" src="images/image40.png" style="width: 601.70px; height: 164.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>Como vemos solo tenemos pip y </span><span>setuptools</span><span class="c3">&nbsp;instalados adem&aacute;s de tener que actualizar el pip.</span></p><p class="c0"><span>Pues actualizamos con el comando </span><span class="c9">python.exe -m pip install --upgrade pip</span><span>&nbsp;y acto seguido instalamos flask con el comando </span><span class="c9">pip install flask</span><span class="c3">.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 120.00px;"><img alt="" src="images/image39.png" style="width: 601.70px; height: 120.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 186.67px;"><img alt="" src="images/image19.png" style="width: 601.70px; height: 186.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>Ya instalada la librer&iacute;a de flask volvemos a usar </span><span class="c9">pip list </span><span class="c3">para ver los paquetes instalados.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 214.67px;"><img alt="" src="images/image24.png" style="width: 601.70px; height: 214.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>Bien, tenemos todas las librer&iacute;as que </span><span>usa</span><span class="c3">&nbsp;flask.</span></p><p class="c0"><span>Dicho esto </span><span>tenemos flask</span><span>&nbsp;instalado dentro de nuestro </span><span class="c9">entorno virtual</span><span class="c3">&nbsp;y listo para usar.</span></p><p class="c0 c19"><span class="c3"></span></p><h4 class="c18" id="h.okw3cgdr3cxv"><span>2- C&oacute;mo usar Flask</span></h4><p class="c0"><span class="c3">Creamos este &aacute;rbol de carpetas para aprovechar flask.</span></p><ul class="c12 lst-kix_rjtlqbwtigex-0 start"><li class="c0 c16 li-bullet-0"><span class="c3">app</span></li></ul><ul class="c12 lst-kix_rjtlqbwtigex-1 start"><li class="c0 c30 li-bullet-0"><span class="c3">templates</span></li><li class="c0 c30 li-bullet-0"><span class="c3">app.py</span></li></ul><ul class="c12 lst-kix_rjtlqbwtigex-0"><li class="c0 c16 li-bullet-0"><span class="c3">env</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 185.00px; height: 149.00px;"><img alt="" src="images/image29.png" style="width: 185.00px; height: 149.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></li></ul><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3">Esto porque comandos identifican templates como plantillas para usar HTML junto a python.</span></p><p class="c0"><span class="c3">Jinja2 tambi&eacute;n utiliza esta carpeta.</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span>En nuestro archivo de python (</span><span class="c9">app.py</span><span class="c3">) empezamos con el fragmento de c&oacute;digo de inicio anteriormente mencionado.</span></p><p class="c0"><span class="c3">Podemos ejecutarlos y nos dar&aacute; esto:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 86.67px;"><img alt="" src="images/image41.png" style="width: 601.70px; height: 86.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Si vamos a la ip junto al puerto mencionado nos saldra esto:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 594.00px; height: 209.00px;"><img alt="" src="images/image32.png" style="width: 594.00px; height: 209.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Esto demuestra que por ahora todo funciona correctamente.</span></p><p class="c0 c19"><span class="c3"></span></p><h1 class="c26" id="h.rl1l8ifs6hla"><span class="c6 c20">SQLAlchemy</span></h1><h4 class="c18" id="h.m7zfomaljor8"><span class="c11 c10">1- Instalar SQLAlchemy</span></h4><p class="c0"><span class="c3">No tenemos que instalar SQLAlchemy propiamente dicho sino la versi&oacute;n que conecta junto con flask, el comando de instalaci&oacute;n es este:</span></p><p class="c0"><span class="c6 c17 c9">pip install flask-sqlalchemy</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 128.00px;"><img alt="" src="images/image16.png" style="width: 601.70px; height: 128.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>Instalado esto ya podemos trabajar con Flask y con SQLAlchemy en nuestro </span><span class="c9">entorno virtual</span><span class="c3">.</span></p><h4 class="c18" id="h.wlch806fm27m"><span class="c11 c10">2- Crear tablas en SQLAlchemy</span></h4><p class="c0"><span>Para crear tablas primero tenemos que importar Flask y </span><span>flask_sqlalchemy</span><span class="c3">&nbsp;dentro de nuestro archivo.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 442.00px; height: 92.00px;"><img alt="" src="images/image11.png" style="width: 442.00px; height: 92.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Luego configuramos la app</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 129.33px;"><img alt="" src="images/image47.png" style="width: 601.70px; height: 129.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Diciendo que el nombre es basado en Flask</span></p><p class="c0"><span>Que la uri de la database estar&aacute; en el mismo directorio y se llamar&aacute; </span><span class="c6 c17 c9">sqlite:///db.sqlite3</span></p><p class="c0"><span class="c3">Y en el mapeado de las modificaciones lo desactivamos puesto a que para lo que vamos a hacer estorba m&aacute;s que ayudar.</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3">Creamos tablas con clases, el nombre de la tabla, remarcar que es un modelo de database.</span></p><p class="c0"><span class="c3">El tutorial requiere que creemos 3 tablas: Clientes, Ordenes, Productos</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 294.00px; height: 192.00px;"><img alt="" src="images/image7.png" style="width: 294.00px; height: 192.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Ahora en cada columna creamos un valor llamado ID la cual ser&aacute; nuestra clave primaria para cada dato que insertemos.</span></p><p class="c0"><span class="c6 c17 c9">id = db.Column(db.Integer, primary_key=True)</span></p><p class="c0"><span class="c3">Remarcando que ser&aacute; una columna en la configuraci&oacute;n de la misma ponemos que ser&aacute; un INT y clave primaria.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 515.00px; height: 188.00px;"><img alt="" src="images/image18.png" style="width: 515.00px; height: 188.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Configuramos la tabla de productos</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 113.33px;"><img alt="" src="images/image46.png" style="width: 601.70px; height: 113.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Creamos name y price para almacenar los precios y los nombres.</span></p><p class="c0"><span>Asignamos a nombre un m&aacute;ximo de 50 caracteres y que no pueda ser un </span><span>NULL</span><span class="c3">&nbsp;adem&aacute;s de hacer que los nombres sean &uacute;nicos y que no se puedan repetir.</span></p><p class="c0"><span class="c3">Mientras que el precio lo marcamos como un INT y que no pueda ser NULL.</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3">Configuramos la tabla de Customers.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 180.00px;"><img alt="" src="images/image15.png" style="width: 601.70px; height: 180.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Creamos primer nombre, apellido, direcci&oacute;n, ciudad, c&oacute;digo postal y email.</span></p><p class="c0"><span class="c3">Asignamos que todos tienen un m&aacute;ximo de 50 caracteres menos address que ponemos 500.</span></p><p class="c0"><span class="c3">Adem&aacute;s de hacer que no puedan ser NULL y que el email sea &uacute;nico. </span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3">Configuramos la tabla de Orders.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 128.00px;"><img alt="" src="images/image45.png" style="width: 601.70px; height: 128.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Creamos fecha de orden</span></p><p class="c0"><span class="c3">Fecha de embarque</span></p><p class="c0"><span class="c3">Fecha de entrega</span></p><p class="c0"><span class="c3">C&oacute;digo cup&oacute;n</span></p><p class="c0"><span class="c3">Hacemos que el dato de fecha de orden no pueda ser NULL y que el default es la fecha de hoy.</span></p><p class="c0"><span class="c3">Para eso tenemos que importar la librer&iacute;a datetime</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 320.00px; height: 24.00px;"><img alt="" src="images/image22.png" style="width: 320.00px; height: 24.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h4 class="c18" id="h.n65b2hw4twhq"><span class="c11 c10">3- Relacionar las tablas</span></h4><p class="c0"><span>Hacemos una clave for&aacute;nea dentro de &Oacute;rdenes para marcar el cliente que ha solicitado esa orden.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 38.67px;"><img alt="" src="images/image3.png" style="width: 601.70px; height: 38.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 571.00px; height: 57.00px;"><img alt="" src="images/image13.png" style="width: 571.00px; height: 57.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Dentro de customers creamos orders para ver todos los valores en que orders coinciden con customer.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 86.67px;"><img alt="" src="images/image33.png" style="width: 601.70px; height: 86.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span class="c3">Creamos una relaci&oacute;n de muchos a muchos entre los productos y las &oacute;rdenes.</span></p><p class="c0"><span class="c3">Donde las claves for&aacute;neas son los id de ordenadores y productos y ambas son claves primarias de esta tabla relacional.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 50.67px;"><img alt="" src="images/image8.png" style="width: 601.70px; height: 50.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Dentro de ordenes creamos el dato de productos como relaci&oacute;n y ponen todos los productos dentro de una orden.</span></p><p class="c0 c19"><span class="c3"></span></p><h4 class="c18" id="h.pv47vnl07yn4"><span class="c11 c10">3- Crear base de datos</span></h4><p class="c0"><span>Para crear la base de datos tenemos que abrir un shell de flask con </span><span class="c9">flask shell</span><span class="c3">.</span></p><p class="c0"><span class="c3">Para ello tenemos que poner el nombre de la aplicaci&oacute;n.</span></p><p class="c0"><span class="c6 c17 c9">python -m env FLASK_APP=app.py</span></p><p class="c0"><span>Ejecutando desde python y en el entorno asignar la app flask como app.py y dentro de la carpeta donde est&aacute; en archivo ./app/app.py ejecutar el comando flask shell.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 81.33px;"><img alt="" src="images/image1.png" style="width: 601.70px; height: 81.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Dentro de la instancia ejecutamos los siguientes comandos:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 78.67px;"><img alt="" src="images/image56.png" style="width: 601.70px; height: 78.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c6 c9 c17">from app import db</span></p><p class="c0"><span class="c3">Para importar todo lo relacionado a nuestra database de la app</span></p><p class="c0"><span class="c6 c17 c9">db.create all()</span></p><p class="c0"><span class="c3">Para crear todo el archivo de la database.</span></p><p class="c0"><span class="c3">Nos generara el archivo donde pusimos el uri</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 124.00px; height: 37.00px;"><img alt="" src="images/image10.png" style="width: 124.00px; height: 37.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Ahora abrimos sqlite con sus comandos en path</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 96.00px;"><img alt="" src="images/image26.png" style="width: 601.70px; height: 96.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>Y vemos que las tablas est&aacute;n correctamente creadas con </span><span class="c9">.tables</span><span class="c3">.</span></p><p class="c0 c19"><span class="c3"></span></p><h4 class="c18" id="h.qbwwqjga5mly"><span class="c11 c10">4- A&ntilde;adir datos a la base de datos</span></h4><p class="c0"><span class="c3">Dentro del shell de flask importamos de la aplicaciones db, y las tablas de productos ordenes y customers</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 80.00px;"><img alt="" src="images/image48.png" style="width: 601.70px; height: 80.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Despu&eacute;s de eso creamos una variable llamada pepe con la clase Customer y a&ntilde;adimos los datos correspondientes al customer.</span></p><p class="c0"><span class="c3">Despu&eacute;s de eso para a&ntilde;adirlo a base de datos tenemos que usar el comando:</span></p><p class="c0"><span class="c6 c17 c9">db.session.add(nuestra variable)</span></p><p class="c0"><span class="c3">Y luego se hacer el add con nuestro nuevo dato, hacemos el commit</span></p><p class="c0"><span class="c6 c17 c9">db.session.commit()</span></p><p class="c0"><span class="c3">Y vemos como se ha a&ntilde;adido a la base de datos pepe garcia.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 128.00px;"><img alt="" src="images/image37.png" style="width: 601.70px; height: 128.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 113.33px;"><img alt="" src="images/image55.png" style="width: 601.70px; height: 113.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>De la misma forma a&ntilde;adimos un producto</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 186.67px;"><img alt="" src="images/image53.png" style="width: 601.70px; height: 186.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Pero para la pr&aacute;ctica necesitamos dos productos en principio as&iacute; que vamos a crear un tel&eacute;fono tambi&eacute;n.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 162.67px;"><img alt="" src="images/image35.png" style="width: 601.70px; height: 162.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Ahora hacemos una entrada con Order</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 76.00px;"><img alt="" src="images/image2.png" style="width: 601.70px; height: 76.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">D&oacute;nde order date es automatico, coupon hemos puesto la nueva f&oacute;rmula de Jumpers para vender m&aacute;s, customer ponemos el id de pepe y productos las variables configuradas.</span></p><p class="c0"><span class="c3">Son nuevas porque con las anteriores no guarde y pues tuve que crear nuevas.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 114.67px;"><img alt="" src="images/image23.png" style="width: 601.70px; height: 114.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Vemos como se ha creado la orden correctamente.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 208.00px;"><img alt="" src="images/image30.png" style="width: 601.70px; height: 208.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">La tabla de relaci&oacute;n entre &oacute;rdenes y productos tambi&eacute;n se ha creado sin ning&uacute;n tipo de problema.</span></p><h5 class="c40" id="h.bme8fnxha6n8"><span class="c10 c31 c17">4.1- Actualizar datos dentro de la base de datos</span></h5><p class="c0"><span class="c3">Para extraer como variable a por ejemplo un customer tenemos que hacer:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 53.33px;"><img alt="" src="images/image31.png" style="width: 601.70px; height: 53.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c6 c17 c9">Customer.query.filter_by(id=1).first()</span></p><p class="c0"><span class="c3">Donde Customer es la tabla de la cual vamos a extraer los nombres.</span></p><p class="c0"><span class="c3">Query es para saber que vamos a hacer una petici&oacute;n.</span></p><p class="c0"><span class="c3">Filter_by para que filtre mediando una o varias condiciones en este caso con la id porque es &uacute;nica y solo nos dar&aacute; al customer que queremos.</span></p><p class="c0"><span>Y </span><span>first</span><span class="c3">&nbsp;para que nos de solo el primero para que sea m&aacute;s limpio todo.</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3">Y para actualizar un dato es mucho mas simple, al ser un objeto solo tienes que hacer:</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 402.00px; height: 127.00px;"><img alt="" src="images/image17.png" style="width: 402.00px; height: 127.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Y as&iacute; se cambia el valor.</span></p><p class="c0"><span class="c3">Para guardarlo hay que usar el commit() directamente.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 72.00px;"><img alt="" src="images/image52.png" style="width: 601.70px; height: 72.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0 c19"><span class="c3"></span></p><h5 class="c40" id="h.huax0rbagthz"><span class="c10 c17 c31">4.2 Eliminar datos dentro de la base de datos</span></h5><p class="c0"><span class="c3">Para la practica de eliminar entradas de la base de datos tenemos que crear otro customer para borrarlo.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 109.33px;"><img alt="" src="images/image5.png" style="width: 601.70px; height: 109.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Yo lo he llamado felipe</span></p><p class="c0"><span class="c3">Lo buscamos mediante su id como antes.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 407.00px; height: 43.00px;"><img alt="" src="images/image21.png" style="width: 407.00px; height: 43.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>Luego con el comando </span><span class="c9">db.session.delete(variable) </span><span class="c3">borramos de la existencia al customer.</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 246.00px; height: 72.00px;"><img alt="" src="images/image27.png" style="width: 246.00px; height: 72.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 113.33px;"><img alt="" src="images/image42.png" style="width: 601.70px; height: 113.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Captura de que no existe no es de antes lo prometo.</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3">Bien bien bien, ya sabemos manejarnos con SQLAlchemy, llega el momento de hacer Queries como enfermitos.</span></p><p class="c0 c19"><span class="c3"></span></p><h1 class="c26" id="h.cxs4yrwwctdu"><span class="c6 c20">Query</span></h1><p class="c0"><span class="c3">Para rellenar las bases de datos el tutorial nos brinda una serie de funciones con las cuales se generan datos de manera aleatoria por lo tanto nos facilita y adelanta mucho trabajo.</span></p><p class="c7"><span class="c8 c23">#generadores</span></p><p class="c7"><span class="c4">def</span><span class="c2">&nbsp;</span><span class="c15">add_customers</span><span class="c5 c10">():</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; </span><span class="c5 c8">for</span><span class="c2">&nbsp;_ </span><span class="c5 c8">in</span><span class="c2">&nbsp;</span><span class="c15">range</span><span class="c5">(</span><span class="c14">100</span><span class="c5 c10">):</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; customer </span><span class="c4">=</span><span class="c2">&nbsp;Customer</span><span class="c5 c10">(</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">first_name</span><span class="c4">=</span><span class="c2">fake</span><span class="c5">.</span><span class="c2">first_name</span><span class="c5 c10">(),</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">last_name</span><span class="c4">=</span><span class="c2">fake</span><span class="c5">.</span><span class="c2">last_name</span><span class="c5 c10">(),</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">address</span><span class="c4">=</span><span class="c2">fake</span><span class="c5">.</span><span class="c2">street_address</span><span class="c5 c10">(),</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">city</span><span class="c4">=</span><span class="c2">fake</span><span class="c5">.</span><span class="c2">city</span><span class="c5 c10">(),</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">postcode</span><span class="c4">=</span><span class="c2">fake</span><span class="c5">.</span><span class="c2">postcode</span><span class="c5 c10">(),</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">email</span><span class="c4">=</span><span class="c2">fake</span><span class="c5">.</span><span class="c2">email</span><span class="c5 c10">()</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5 c10">)</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; db</span><span class="c5">.</span><span class="c2">session</span><span class="c5">.</span><span class="c2">add</span><span class="c5">(</span><span class="c2">customer</span><span class="c5 c10">)</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; db</span><span class="c5">.</span><span class="c2">session</span><span class="c5">.</span><span class="c2">commit</span><span class="c5 c10">()</span></p><p class="c7 c19"><span class="c2 c10"></span></p><p class="c7"><span class="c4">def</span><span class="c2">&nbsp;</span><span class="c15">add_orders</span><span class="c5 c10">():</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; customers </span><span class="c4">=</span><span class="c2">&nbsp;Customer</span><span class="c5">.</span><span class="c2">query</span><span class="c5">.</span><span class="c2">all</span><span class="c5 c10">()</span></p><p class="c7 c19"><span class="c2 c10"></span></p><p class="c7"><span class="c2">&nbsp; &nbsp; </span><span class="c5 c8">for</span><span class="c2">&nbsp;_ </span><span class="c5 c8">in</span><span class="c2">&nbsp;</span><span class="c15">range</span><span class="c5">(</span><span class="c14">1000</span><span class="c5 c10">):</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23 c8">#choose a random customer</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; customer </span><span class="c4">=</span><span class="c2">&nbsp;random</span><span class="c5">.</span><span class="c2">choice</span><span class="c5">(</span><span class="c2">customers</span><span class="c5 c10">)</span></p><p class="c7 c19"><span class="c2 c10"></span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; ordered_date </span><span class="c4">=</span><span class="c2">&nbsp;fake</span><span class="c5">.</span><span class="c2">date_time_this_year</span><span class="c5 c10">()</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; shipped_date </span><span class="c4">=</span><span class="c2">&nbsp;random</span><span class="c5">.</span><span class="c2">choices</span><span class="c5">([</span><span class="c14">None</span><span class="c5">,</span><span class="c2">&nbsp;fake</span><span class="c5">.</span><span class="c2">date_time_between</span><span class="c5">(</span><span class="c22">start_date</span><span class="c4">=</span><span class="c2">ordered_date</span><span class="c5">)],</span><span class="c2">&nbsp;</span><span class="c5">[</span><span class="c14">10</span><span class="c5">,</span><span class="c2">&nbsp;</span><span class="c14">90</span><span class="c5">])[</span><span class="c14">0</span><span class="c5 c10">]</span></p><p class="c7 c19"><span class="c2 c10"></span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23 c8">#choose either random None or random date for delivered and shipped</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; delivered_date </span><span class="c4">=</span><span class="c2">&nbsp;</span><span class="c14 c10">None</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5 c8">if</span><span class="c2">&nbsp;shipped_date</span><span class="c5 c10">:</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; delivered_date </span><span class="c4">=</span><span class="c2">&nbsp;random</span><span class="c5">.</span><span class="c2">choices</span><span class="c5">([</span><span class="c14">None</span><span class="c5">,</span><span class="c2">&nbsp;fake</span><span class="c5">.</span><span class="c2">date_time_between</span><span class="c5">(</span><span class="c22">start_date</span><span class="c4">=</span><span class="c2">shipped_date</span><span class="c5">)],</span><span class="c2">&nbsp;</span><span class="c5">[</span><span class="c14">50</span><span class="c5">,</span><span class="c2">&nbsp;</span><span class="c14">50</span><span class="c5">])[</span><span class="c14">0</span><span class="c5 c10">]</span></p><p class="c7 c19"><span class="c2 c10"></span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23 c8">#choose either random None or one of three coupon codes</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; coupon_code </span><span class="c4">=</span><span class="c2">&nbsp;random</span><span class="c5">.</span><span class="c2">choices</span><span class="c5">([</span><span class="c14">None</span><span class="c5">,</span><span class="c2">&nbsp;</span><span class="c5">&#39;</span><span class="c27">50OFF</span><span class="c5">&#39;,</span><span class="c2">&nbsp;</span><span class="c5">&#39;</span><span class="c27">FREESHIPPING</span><span class="c5">&#39;,</span><span class="c2">&nbsp;</span><span class="c5">&#39;</span><span class="c27">BUYONEGETONE</span><span class="c5">&#39;],</span><span class="c2">&nbsp;</span><span class="c5">[</span><span class="c14">80</span><span class="c5">,</span><span class="c2">&nbsp;</span><span class="c14">5</span><span class="c5">,</span><span class="c2">&nbsp;</span><span class="c14">5</span><span class="c5">,</span><span class="c2">&nbsp;</span><span class="c14">5</span><span class="c5">])[</span><span class="c14">0</span><span class="c5 c10">]</span></p><p class="c7 c19"><span class="c2 c10"></span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; order </span><span class="c4">=</span><span class="c2">&nbsp;Order</span><span class="c5 c10">(</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">customer_id</span><span class="c4">=</span><span class="c2">customer</span><span class="c5">.</span><span class="c2">id</span><span class="c5 c10">,</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">order_date</span><span class="c4">=</span><span class="c2">ordered_date</span><span class="c5 c10">,</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">shipped_date</span><span class="c4">=</span><span class="c2">shipped_date</span><span class="c5 c10">,</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">delivered_date</span><span class="c4">=</span><span class="c2">delivered_date</span><span class="c5 c10">,</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">coupon_code</span><span class="c4">=</span><span class="c2 c10">coupon_code</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5 c10">)</span></p><p class="c7 c19"><span class="c2 c10"></span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; db</span><span class="c5">.</span><span class="c2">session</span><span class="c5">.</span><span class="c2">add</span><span class="c5">(</span><span class="c2">order</span><span class="c5 c10">)</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; db</span><span class="c5">.</span><span class="c2">session</span><span class="c5">.</span><span class="c2">commit</span><span class="c5 c10">()</span></p><p class="c7 c19"><span class="c2 c10"></span></p><p class="c7"><span class="c4">def</span><span class="c2">&nbsp;</span><span class="c15">add_products</span><span class="c5 c10">():</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; </span><span class="c5 c8">for</span><span class="c2">&nbsp;_ </span><span class="c5 c8">in</span><span class="c2">&nbsp;</span><span class="c15">range</span><span class="c5">(</span><span class="c14">10</span><span class="c5 c10">):</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; product </span><span class="c4">=</span><span class="c2">&nbsp;Product</span><span class="c5 c10">(</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">name</span><span class="c4">=</span><span class="c2">fake</span><span class="c5">.</span><span class="c2">color_name</span><span class="c5 c10">(),</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c22">price</span><span class="c4">=</span><span class="c2">random</span><span class="c5">.</span><span class="c2">randint</span><span class="c5">(</span><span class="c14">10</span><span class="c5">,</span><span class="c14">100</span><span class="c5 c10">)</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c5 c10">)</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; db</span><span class="c5">.</span><span class="c2">session</span><span class="c5">.</span><span class="c2">add</span><span class="c5">(</span><span class="c2">product</span><span class="c5 c10">)</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; db</span><span class="c5">.</span><span class="c2">session</span><span class="c5">.</span><span class="c2">commit</span><span class="c5 c10">()</span></p><p class="c7"><span class="c2 c10">&nbsp; &nbsp;</span></p><p class="c7"><span class="c4">def</span><span class="c2">&nbsp;</span><span class="c15">add_order_products</span><span class="c5 c10">():</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; orders </span><span class="c4">=</span><span class="c2">&nbsp;Order</span><span class="c5">.</span><span class="c2">query</span><span class="c5">.</span><span class="c2">all</span><span class="c5 c10">()</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; products </span><span class="c4">=</span><span class="c2">&nbsp;Product</span><span class="c5">.</span><span class="c2">query</span><span class="c5">.</span><span class="c2">all</span><span class="c5 c10">()</span></p><p class="c7 c19"><span class="c2 c10"></span></p><p class="c7"><span class="c2">&nbsp; &nbsp; </span><span class="c5 c8">for</span><span class="c2">&nbsp;order </span><span class="c5 c8">in</span><span class="c2">&nbsp;orders</span><span class="c5 c10">:</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23 c8">#select random k</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; k </span><span class="c4">=</span><span class="c2">&nbsp;random</span><span class="c5">.</span><span class="c2">randint</span><span class="c5">(</span><span class="c14">1</span><span class="c5">,</span><span class="c2">&nbsp;</span><span class="c14">3</span><span class="c5 c10">)</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c23 c8"># select random products</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; purchased_products </span><span class="c4">=</span><span class="c2">&nbsp;random</span><span class="c5">.</span><span class="c2">sample</span><span class="c5">(</span><span class="c2">products</span><span class="c5">,</span><span class="c2">&nbsp;k</span><span class="c5 c10">)</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; &nbsp; &nbsp; order</span><span class="c5">.</span><span class="c2">products</span><span class="c5">.</span><span class="c2">extend</span><span class="c5">(</span><span class="c2">purchased_products</span><span class="c5 c10">)</span></p><p class="c7"><span class="c2 c10">&nbsp; &nbsp; &nbsp; &nbsp;</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; db</span><span class="c5">.</span><span class="c2">session</span><span class="c5">.</span><span class="c2">commit</span><span class="c5 c10">()</span></p><p class="c7 c19"><span class="c2 c10"></span></p><p class="c7"><span class="c4">def</span><span class="c2">&nbsp;</span><span class="c15">create_random_data</span><span class="c5 c10">():</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; db</span><span class="c5">.</span><span class="c2">create_all</span><span class="c5 c10">()</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; add_customers</span><span class="c5 c10">()</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; add_orders</span><span class="c5 c10">()</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; add_products</span><span class="c5 c10">()</span></p><p class="c7"><span class="c2">&nbsp; &nbsp; add_order_products</span><span class="c5 c10">()</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3">Copiamos el c&oacute;digo debajo de las clases de nuestra tablas.</span></p><p class="c0"><span class="c3">Y abrimos nuestra SHELL.</span></p><p class="c0"><span>All&iacute; importamos </span><span>create_random_data</span><span class="c3">&nbsp;y ejecutamos</span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 328.00px; height: 58.00px;"><img alt="" src="images/image28.png" style="width: 328.00px; height: 58.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 265.33px;"><img alt="" src="images/image51.png" style="width: 601.70px; height: 265.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 408.00px;"><img alt="" src="images/image44.png" style="width: 601.70px; height: 408.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 245.33px;"><img alt="" src="images/image12.png" style="width: 601.70px; height: 245.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 518.00px; height: 500.00px;"><img alt="" src="images/image6.png" style="width: 518.00px; height: 500.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Como podemos observar todas las tablas han sido rellenadas con gran cantidad de datos aleatorios que pueden o no tener sentido.</span></p><p class="c0 c19"><span class="c3"></span></p><h4 class="c18" id="h.gdkzq6ilcgy5"><span class="c10 c11">1- Get All Customer Orders</span></h4><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 113.33px;"><img alt="" src="images/image20.png" style="width: 601.70px; height: 113.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>Creamos una </span><span>funci&oacute;n query que</span><span>&nbsp;busque todas las &oacute;rdenes que ha hecho un cliente como variable tenemos el id de cliente y devolver&aacute; todas las &oacute;rdenes que coincidan con la id luego nos devolver&aacute; la fecha de la orden de cada orden.</span></p><p class="c0 c19"><span class="c3"></span></p><h4 class="c18" id="h.qodkof4rt4d7"><span class="c11 c10">2- Get All pending Orders</span></h4><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 90.67px;"><img alt="" src="images/image43.png" style="width: 601.70px; height: 90.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Creamos una funci&oacute;n que busque entre las &oacute;rdenes las que no tengan fecha de embarque lo que quiere decir que no han sido enviadas y relacionan completamente con pendientes luego por cara orden dentro de el listado de ordenes pendientes imprimir&aacute; la fecha de la orden.</span></p><p class="c0 c19"><span class="c3"></span></p><h4 class="c18" id="h.fey7xx288nf8"><span class="c11 c10">3- How many customers</span></h4><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 408.00px; height: 118.00px;"><img alt="" src="images/image36.png" style="width: 408.00px; height: 118.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Hacemos una funci&oacute;n que printe la cantidad de Customers dentro de la query.</span></p><p class="c0 c19"><span class="c3"></span></p><h4 class="c18" id="h.lbm6nymvne5i"><span class="c11 c10">4- Get orders with Coupon Codes</span></h4><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 94.67px;"><img alt="" src="images/image49.png" style="width: 601.70px; height: 94.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span>Inventamos una funci&oacute;n que busque mediante un filtro los que dentro del dato </span><span>coupon_code</span><span>&nbsp;no sea </span><span>NULL</span><span>&nbsp;as&iacute; sabemos que el resultante tiene cup&oacute;n desde aqu&iacute; filtramos los que sean diferentes a </span><span class="c9">FREESHIPPING</span><span class="c3">.</span></p><p class="c0"><span class="c3">Imprimimos uno por uno su c&oacute;digo de cup&oacute;n.</span></p><p class="c0 c19"><span class="c3"></span></p><h4 class="c18" id="h.a1gh4gh9429m"><span class="c11 c10">5- Get revenue Past x days</span></h4><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 192.00px;"><img alt="" src="images/image9.png" style="width: 601.70px; height: 192.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Creamos una funci&oacute;n que suma el precio de todos los productos de todas las &oacute;rdenes que tenga una fecha de orden mayor a la fecha actual - el tiempo expresado como x.</span></p><p class="c0"><span class="c3">As&iacute; obtenemos los ingresos o beneficios de ese tiempo en espec&iacute;fico. Se puede mejorar el c&oacute;digo si en vez de dejar la variable en x_day=30 quitamos el &ldquo;=30&rdquo; as&iacute; cuando ejecutemos la funci&oacute;n podremos elegir el tiempo.</span></p><p class="c0 c19"><span class="c3"></span></p><h4 class="c18" id="h.wz1gxwlsw5zd"><span class="c11 c10">6- Get the average fulfillment time</span></h4><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 208.00px;"><img alt="" src="images/image50.png" style="width: 601.70px; height: 208.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Hacemos una funciones que dentro de la querry busque en cada orden donde la fecha de embarque no sea NULL, de esas pilla la fecha de embarque y la resta con la fecha de orden obteniendo el tiempo tardado entre la orden y la entre y luego hace una media entre todos los otros tiempos.</span></p><p class="c0 c19"><span class="c3"></span></p><h4 class="c18" id="h.pd1f858jjmd"><span class="c11 c10">7- Get Customers Who Have Purchased more than x</span></h4><p class="c0"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 601.70px; height: 62.67px;"><img alt="" src="images/image25.png" style="width: 601.70px; height: 62.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c3">Creamos una funci&oacute;n donde buscaremos los clientes que hayan gastado m&aacute;s de x dinero.</span></p><p class="c0"><span>Para ello vamos a buscar dentro de la base de datos todos los clientes, sus &oacute;rdenes y los productos dentro de las &oacute;rdenes. Y agrupamos los clientes que tengan la suma de todo el precio de los productos mayor a </span><span class="c9">amount </span><span class="c3">en este caso 500.</span></p><p class="c0"><span>Y vemos que esta query tambi&eacute;n se puede mejorar quitando el </span><span class="c9">=500</span><span class="c3">&nbsp;para que al importar podamos aplicar la variable.</span></p><p class="c0 c19"><span class="c3"></span></p><p class="c0"><span class="c3">Bibliograf&iacute;a</span></p><p class="c0"><span class="c21"><a class="c25" href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/SQLAlchemy&amp;sa=D&amp;source=editors&amp;ust=1677803565660154&amp;usg=AOvVaw1vuYoDrykZwl475zAEablg">https://en.wikipedia.org/wiki/SQLAlchemy</a></span></p><p class="c0"><span class="c21"><a class="c25" href="https://www.google.com/url?q=https://es.wikipedia.org/wiki/Flask&amp;sa=D&amp;source=editors&amp;ust=1677803565660455&amp;usg=AOvVaw276g5jiOh_b71JG_HIjwx7">https://es.wikipedia.org/wiki/Flask</a></span></p><p class="c0"><span class="c21"><a class="c25" href="https://www.google.com/url?q=https://www.cdmon.com/es/blog/la-ejecucion-de-scripts-esta-deshabilitada-en-este-sistema-te-contamos-como-actuar&amp;sa=D&amp;source=editors&amp;ust=1677803565660683&amp;usg=AOvVaw1VNxn65L1PX6karno8eTYO">https://www.cdmon.com/es/blog/la-ejecucion-de-scripts-esta-deshabilitada-en-este-sistema-te-contamos-como-actuar</a></span></p><p class="c0"><span class="c21"><a class="c25" href="https://www.google.com/url?q=https://flask-es.readthedocs.io/cli/&amp;sa=D&amp;source=editors&amp;ust=1677803565660877&amp;usg=AOvVaw2ITw5JQSOgALfD9GIf73SO">https://flask-es.readthedocs.io/cli/</a></span></p><p class="c0"><span class="c21"><a class="c25" href="https://www.google.com/url?q=https://flask.palletsprojects.com/en/2.2.x/shell/?highlight%3Dshell&amp;sa=D&amp;source=editors&amp;ust=1677803565661084&amp;usg=AOvVaw1EL4OpWPL_aRAJT0YfRE7W">https://flask.palletsprojects.com/en/2.2.x/shell/?highlight=shell</a></span></p><p class="c0"><span class="c21"><a class="c25" href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3D-1DmVCPB6H8%26t%3D685s%26ab_channel%3DUskoKruM2010&amp;sa=D&amp;source=editors&amp;ust=1677803565661296&amp;usg=AOvVaw2nbHg4oJFYdTWPdpfGoRYL">https://www.youtube.com/watch?v=-1DmVCPB6H8&amp;t=685s&amp;ab_channel=UskoKruM2010</a></span></p><p class="c0"><span class="c21"><a class="c25" href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3DX2r4Sky01lw%26ab_channel%3DFaztCode&amp;sa=D&amp;source=editors&amp;ust=1677803565661502&amp;usg=AOvVaw3tdticxDMAlvgTp5xd1dhX">https://www.youtube.com/watch?v=X2r4Sky01lw&amp;ab_channel=FaztCode</a></span></p><p class="c0"><span class="c21"><a class="c25" href="https://www.google.com/url?q=https://www.sqlite.org/quickstart.html&amp;sa=D&amp;source=editors&amp;ust=1677803565661679&amp;usg=AOvVaw0Ce4rnbv0vc7scUvnUTUUL">https://www.sqlite.org/quickstart.html</a></span></p><p class="c0"><span class="c21"><a class="c25" href="https://www.google.com/url?q=https://www.geeksforgeeks.org/how-to-fix-syntaxerror-positional-argument-follows-keyword-argument-in-python/&amp;sa=D&amp;source=editors&amp;ust=1677803565661908&amp;usg=AOvVaw0tS_DCri0I1s3aIoHkx2AC">https://www.geeksforgeeks.org/how-to-fix-syntaxerror-positional-argument-follows-keyword-argument-in-python/</a></span></p><p class="c0 c19"><span class="c3"></span></p></body></html>